This problem is in fact a maximum flow problem.
Try to reduce the problem to a maximum flow (or minimum cut) problem discussed in the class.